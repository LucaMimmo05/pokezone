<section class="home">
    <div class="hero" [style.background]="currentBgColor">
        <app-navbar class="hero-navbar" [style.background]="currentBgColor"
            (typeSelected)="onTypeSelected($event)"></app-navbar>
        <div class="hero-content">
            <div class="hero-items">
                <app-drop-svg class="hero-drop-svg" [color]="currentSvgColor"></app-drop-svg>
                <app-lightning-svg class="hero-lightning-svg" [color]="currentSvgColor"></app-lightning-svg>
                <app-message-svg class="hero-message-svg" [color]="currentSvgColor"></app-message-svg>
            </div>

            <div class="hero-tag">
                <div class="bag">üéí</div>
                <span class="bag-text" [style.color]="currentBgColor">pokezone</span>
            </div>
            <div class="hero-title">
                <h1>{{isChangePokeball() ? "Who's that Pok√©mon?" : "Catch 'em all!"}}</h1>
                <p>The perfect guide for those who want to catch Pok√©mon all over the world</p>
            </div>
            <div class="hero-items">
                <app-fire-svg class="hero-fire-svg" [color]="currentSvgColor"></app-fire-svg>
                <app-snow-svg class="hero-snow-svg" [color]="currentSvgColor"></app-snow-svg>
                <app-leaf-svg class="hero-leaf-svg" [color]="currentSvgColor"></app-leaf-svg>
                <app-spark-svg class="hero-spark-svg" [color]="currentSvgColor"></app-spark-svg>
            </div>
            <div class="pokeball-img">

                <div class="hero-stars">
                    <app-star-svg [size]="28" class="hero-star-small"></app-star-svg>
                    <app-star-svg [size]="41"></app-star-svg>
                    <app-star-svg [size]="28" class="hero-star-small"></app-star-svg>
                </div>
                <div class="hero-img">
                    <img class="pokeball-red"
                        [src]="isChangePokeball() ? 'pokeball-red.png' : 'pokeball-blue.png'" alt="Pokeball">
                    <div class="pokeball-ground-shadow"></div>
                </div>

            </div>
        </div>
        <div class="carousel-dots">
            <app-carousel-dot [isActive]="handleActiveItem(0)"></app-carousel-dot>
            <app-carousel-dot [isActive]="handleActiveItem(1)"></app-carousel-dot>
        </div>

    </div>

    <div class="sec2">
        <div class="sec2-top">
            <h1>Select your Pok√©mon!</h1>
            <div class="search-bar">
                <input type="text" placeholder="Search by name or code" [value]="searchQuery"
                    (input)="onSearchInput($event)" (keyup.enter)="onSearchSubmit()">
                <button (click)="onSearchSubmit()" [disabled]="isLoading">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                        <path
                            d="M11.1931 2.72879C13.525 5.03385 13.525 8.7711 11.1931 11.0762C8.86132 13.3812 5.08069 13.3812 2.74887 11.0762C0.417045 8.7711 0.417045 5.03385 2.74887 2.72879C5.08069 0.423735 8.86132 0.423735 11.1931 2.72879"
                            stroke="#3E75C3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M11.1499 11.1096L16.9999 16.9716" stroke="#3E75C3" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </button>
            </div>
        </div>

    </div>

    <div class="sec3">
        <div class="sec3-content">
            @if (!isMobile) {
            <app-menu (typeSelected)="onTypeSelected($event)"></app-menu>
            }
            <div class="sec3-pokemon">

                <div class="sec3-top">
                    <div class="sec3-title">
                        <app-small-pokeball-svg class="small-pokeball"></app-small-pokeball-svg>
                        <h3>
                            @if (selectedType && selectedAbility) {
                            {{ capitalize(selectedType === 'bug' ? "Insect" : selectedType) }} + {{
                            capitalize(selectedAbility) }}
                            } @else if (selectedType) {
                            {{ "Type: " + capitalize(selectedType === 'bug' ? "Insect" : selectedType) }}
                            } @else if (selectedAbility) {
                            Ability: {{ capitalize(selectedAbility) }}
                            } @else {
                            All Pok√©mons
                            }
                        </h3>
                    </div>
                    @if (!isMobile) {
                    <app-ability-filter (abilitySelected)="onAbilitySelected($event)"></app-ability-filter>
                    }
                </div>
                <div class="filters-row">
                    <app-mobile-filter class="app-mobile-filter" [view]="selectedType"
                        (typeSelected)="onTypeSelected($event)"></app-mobile-filter>
                    @if (isMobile) {
                    <app-ability-filter (abilitySelected)="onAbilitySelected($event)"></app-ability-filter>
                    }
                </div>
                <div class="pokemons-content">
                    @if (pokemons.length > 0) {
                    @for (pokemon of pokemons; track $index) {
                    <app-pokemon-card [pokemon]="pokemon"></app-pokemon-card>
                    }
                    } @else if (!isLoading) {
                    <div class="no-results">
                        <p>No Pok√©mon found matching your criteria.</p>
                    </div>
                    }
                </div>
            </div>
        </div>
        @if (pokemons.length > 0) {
        <div class="load-more">
            <button (click)="loadMore()" [disabled]="isLoading">{{ isLoading ? 'Loading...' : 'Load more'
                }}</button>
        </div>
        }
    </div>

    <button class="scroll-to-top" [class.hidden]="!showScrollButton" (click)="scrollToTop()"
        aria-label="Torna all'inizio" [style.background]="currentBgColor">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 19V5M5 12l7-7 7 7" />
        </svg>
    </button>

</section>