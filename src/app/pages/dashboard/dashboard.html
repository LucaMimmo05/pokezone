<section class="dashboard">
  <dashboard-hero [currentBgColor]="currentBgColor" [currentSvgColor]="currentSvgColor"></dashboard-hero>

  <div class="back-btn-wrapper">
    <button class="back-btn" (click)="goBack()" aria-label="Go back">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="15 18 9 12 15 6"></polyline>
      </svg>
      Back
    </button>
  </div>

  @if (loading) {
    <app-loader></app-loader>
  }

  @if (error) {
    <div class="error">
      <p>{{ error }}</p>
      <button class="btn btn-primary" (click)="loadStats()">Retry</button>
    </div>
  }

  @if (!loading) {
  <dashboard-stats [stats]="stats" [typeEntries]="typeEntries"></dashboard-stats>

    @if (apiFailed) {
      <div class="placeholder-banner">Data temporarily unavailable.</div>
    }

    <div class="charts-container">
      <dashboard-charts [colorChartOptions]="colorChartOptions" [shapeChartOptions]="shapeChartOptions"></dashboard-charts>
      <dashboard-type-bars [typeEntries]="typeEntries" [typeColors]="typeColors" [apiFailed]="apiFailed" [getBarWidth]="getBarWidth.bind(this)"></dashboard-type-bars>
    </div>
  }
</section>